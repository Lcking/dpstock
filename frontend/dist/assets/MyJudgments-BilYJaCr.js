import{d as $,c as g,o as d,a as b,u as L,r as k,b as V,e as s,w as n,f as a,N as E,g as P,h as R,i as v,j as x,k as q,B as N,l as r,m as D,D as O,n as j,p as _,q as i,t as u,F as S,s as U,v as f,x as G,y as M,z as H,A as c,_ as K}from"./index-Dst_PqRe.js";import{N as Q,a as W}from"./CollapseItem-Bc2T4e0z.js";const X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Y=$({name:"RefreshOutline",render:function(C,p){return d(),g("svg",X,p[0]||(p[0]=[b("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),b("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1)]))}}),Z={class:"my-judgments-container"},ee={style:{margin:"0","padding-left":"20px"}},te=$({__name:"MyJudgments",setup(B){const C=L(),p=k(!1),m=k([]),y=k(!1),l=k(null),h={maintained:{color:"success",icon:"ğŸŸ¢",text:"ä¿æŒ"},weakened:{color:"warning",icon:"ğŸŸ¡",text:"å‰Šå¼±"},broken:{color:"error",icon:"ğŸ”´",text:"ç ´å"}},I=[{title:"è‚¡ç¥¨ä»£ç ",key:"stock_code",width:100,fixed:"left"},{title:"ç»“æ„ç±»å‹",key:"structure_type",width:100,render(e){return{consolidation:"ç›˜æ•´",uptrend:"ä¸Šå‡",downtrend:"ä¸‹é™"}[e.structure_type]||e.structure_type}},{title:"MA200ä½ç½®",key:"ma200_position",width:100,render(e){return{above:"ä¸Šæ–¹",below:"ä¸‹æ–¹",near:"æ¥è¿‘",no_data:"æ— æ•°æ®"}[e.ma200_position]||e.ma200_position}},{title:"é˜¶æ®µ",key:"phase",width:80,render(e){return{early:"æ—©æœŸ",middle:"ä¸­æœŸ",late:"åæœŸ",unclear:"ä¸æ˜"}[e.phase]||e.phase}},{title:"é€‰æ‹©å‰æ",key:"selected_candidates",width:100,render(e){return e.selected_candidates.join(", ")}},{title:"å½“å‰çŠ¶æ€",key:"status",width:100,render(e){if(!e.latest_check)return c(M,{size:"small",type:"default"},{default:()=>"æœªéªŒè¯"});const t=e.latest_check.current_structure_status,o=h[t];return c(M,{size:"small",type:o.color},{default:()=>`${o.icon} ${o.text}`})}},{title:"ä»·æ ¼å˜åŒ–",key:"price_change",width:100,render(e){if(!e.latest_check)return"--";const t=e.latest_check.price_change_pct,o=t>=0?"+":"",w=t>=0?"success":"error";return c(i,{type:w},{default:()=>`${o}${t.toFixed(2)}%`})}},{title:"åŸå› ",key:"reasons",width:300,render(e){return!e.latest_check||!e.latest_check.reasons.length?"--":c(Q,{defaultExpandedNames:[]},{default:()=>c(W,{title:`æŸ¥çœ‹åŸå›  (${e.latest_check.reasons.length})`,name:"1"},{default:()=>c("ul",{style:"margin: 0; padding-left: 20px;"},e.latest_check.reasons.map(t=>c("li",{style:"margin: 4px 0;"},t)))})})}},{title:"å¿«ç…§æ—¶é—´",key:"snapshot_time",width:150,render(e){return new Date(e.snapshot_time).toLocaleString("zh-CN")}},{title:"æ“ä½œ",key:"actions",width:100,fixed:"right",render(e){return c(N,{size:"small",onClick:()=>F(e.judgment_id)},{default:()=>"æŸ¥çœ‹è¯¦æƒ…"})}}];async function z(){p.value=!0;try{const e=await R.getMyJudgments(50);m.value=e.judgments||[]}catch(e){console.error("åŠ è½½åˆ¤æ–­åˆ—è¡¨å¤±è´¥:",e),C.error("åŠ è½½åˆ¤æ–­åˆ—è¡¨å¤±è´¥")}finally{p.value=!1}}function F(e){const t=m.value.find(o=>o.judgment_id===e);t&&(l.value=t,y.value=!0)}function J(e){return{consolidation:"ç›˜æ•´",uptrend:"ä¸Šå‡",downtrend:"ä¸‹é™"}[e]||e}function T(e){return{above:"ä¸Šæ–¹",below:"ä¸‹æ–¹",near:"æ¥è¿‘",no_data:"æ— æ•°æ®"}[e]||e}function A(e){return{early:"æ—©æœŸ",middle:"ä¸­æœŸ",late:"åæœŸ",unclear:"ä¸æ˜"}[e]||e}return V(()=>{z()}),(e,t)=>(d(),g("div",Z,[s(a(E),{title:"æˆ‘çš„åˆ¤æ–­è®°å½•"},{"header-extra":n(()=>[s(a(_),null,{default:n(()=>[s(a(i),{depth:"3"},{default:n(()=>[r("å…± "+u(m.value.length)+" æ¡",1)]),_:1}),s(a(N),{size:"small",onClick:z},{icon:n(()=>[s(a(D),null,{default:n(()=>[s(a(Y))]),_:1})]),default:n(()=>[t[2]||(t[2]=r(" åˆ·æ–° "))]),_:1})]),_:1})]),default:n(()=>[s(a(q),{columns:I,data:m.value,loading:p.value,pagination:{pageSize:10},"row-key":o=>o.judgment_id,bordered:!1,striped:""},null,8,["data","loading","row-key"]),m.value.length===0&&!p.value?(d(),v(a(j),{key:0,description:"æš‚æ— åˆ¤æ–­è®°å½•",size:"large"},{icon:n(()=>[s(a(D),null,{default:n(()=>[s(a(O))]),_:1})]),extra:n(()=>[s(a(N),{onClick:t[0]||(t[0]=o=>e.$router.push("/"))},{default:n(()=>t[3]||(t[3]=[r(" å»åˆ†æé¡µé¢ ")])),_:1})]),_:1})):x("",!0)]),_:1}),s(a(P),{show:y.value,"onUpdate:show":t[1]||(t[1]=o=>y.value=o),preset:"card",title:"åˆ¤æ–­è¯¦æƒ…",style:{width:"90%","max-width":"800px"},bordered:!1,size:"huge"},{default:n(()=>[l.value?(d(),g(S,{key:0},[s(a(U),{bordered:"",column:2},{default:n(()=>[s(a(f),{label:"è‚¡ç¥¨ä»£ç "},{default:n(()=>[r(u(l.value.stock_code),1)]),_:1}),s(a(f),{label:"å¿«ç…§æ—¶é—´"},{default:n(()=>[r(u(new Date(l.value.snapshot_time).toLocaleString("zh-CN")),1)]),_:1}),s(a(f),{label:"ç»“æ„ç±»å‹"},{default:n(()=>[r(u(J(l.value.structure_type)),1)]),_:1}),s(a(f),{label:"MA200ä½ç½®"},{default:n(()=>[r(u(T(l.value.ma200_position)),1)]),_:1}),s(a(f),{label:"é˜¶æ®µ"},{default:n(()=>[r(u(A(l.value.phase)),1)]),_:1}),s(a(f),{label:"é€‰æ‹©å‰æ"},{default:n(()=>[r(u(l.value.selected_candidates.join(", ")),1)]),_:1})]),_:1}),s(a(G),null,{default:n(()=>t[4]||(t[4]=[r("å½“å‰éªŒè¯çŠ¶æ€")])),_:1}),l.value.latest_check?(d(),v(a(_),{key:0,vertical:""},{default:n(()=>[s(a(_),{align:"center"},{default:n(()=>[s(a(i),{strong:""},{default:n(()=>t[5]||(t[5]=[r("ç»“æ„çŠ¶æ€:")])),_:1}),s(a(M),{type:h[l.value.latest_check.current_structure_status].color,size:"medium"},{default:n(()=>[r(u(h[l.value.latest_check.current_structure_status].icon)+" "+u(h[l.value.latest_check.current_structure_status].text),1)]),_:1},8,["type"])]),_:1}),s(a(_),{align:"center"},{default:n(()=>[s(a(i),{strong:""},{default:n(()=>t[6]||(t[6]=[r("å½“å‰ä»·æ ¼:")])),_:1}),s(a(i),null,{default:n(()=>[r(u(l.value.latest_check.current_price.toFixed(2)),1)]),_:1})]),_:1}),s(a(_),{align:"center"},{default:n(()=>[s(a(i),{strong:""},{default:n(()=>t[7]||(t[7]=[r("ä»·æ ¼å˜åŒ–:")])),_:1}),s(a(i),{type:l.value.latest_check.price_change_pct>=0?"success":"error"},{default:n(()=>[r(u(l.value.latest_check.price_change_pct>=0?"+":"")+" "+u(l.value.latest_check.price_change_pct.toFixed(2))+"% ",1)]),_:1},8,["type"])]),_:1}),l.value.latest_check.reasons.length>0?(d(),v(a(_),{key:0,vertical:""},{default:n(()=>[s(a(i),{strong:""},{default:n(()=>t[8]||(t[8]=[r("éªŒè¯åŸå› :")])),_:1}),b("ul",ee,[(d(!0),g(S,null,H(l.value.latest_check.reasons,(o,w)=>(d(),g("li",{key:w},u(o),1))),128))])]),_:1})):x("",!0),s(a(i),{depth:"3",style:{"font-size":"12px"}},{default:n(()=>[r(" éªŒè¯æ—¶é—´: "+u(l.value.latest_check.verification_time?new Date(l.value.latest_check.verification_time).toLocaleString("zh-CN"):"æœªçŸ¥"),1)]),_:1})]),_:1})):(d(),v(a(j),{key:1,description:"æš‚æ— éªŒè¯æ•°æ®",size:"small"}))],64)):x("",!0)]),_:1},8,["show"])]))}}),se=K(te,[["__scopeId","data-v-858be04c"]]);export{se as default};
